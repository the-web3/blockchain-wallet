# COSMOS ä¸»é“¾é’±åŒ…å¼€å‘

# ä¸€. Cosmos ç®€ä»‹

Cosmos æ˜¯ä¸€ä¸ªå»ä¸­å¿ƒåŒ–çš„ç½‘ç»œå¹³å°ï¼Œå®ƒæ—¨åœ¨è§£å†³å½“å‰åŒºå—é“¾æŠ€æœ¯ä¸­çš„å¯æ‰©å±•æ€§å’Œäº’æ“ä½œæ€§é—®é¢˜ã€‚Cosmos é€šè¿‡ä¸€ç§ç§°ä¸º Tendermint æ ¸å¿ƒçš„å…±è¯†æœºåˆ¶ï¼Œæä¾›äº†ä¸€ç§æ¨¡å—åŒ–å’Œé«˜æ•ˆçš„åŒºå—é“¾æ¶æ„ï¼Œä½¿ä¸åŒåŒºå—é“¾èƒ½å¤Ÿç›¸äº’é€šä¿¡å’Œåä½œã€‚

## 1.æ¦‚è¿°

Cosmos æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç½‘ç»œï¼ŒåŒ…å«å¤šä¸ªç‹¬ç«‹çš„åŒºå—é“¾ï¼Œç§°ä¸º "zones"ï¼Œè¿™äº›åŒºå—é“¾é€šè¿‡ä¸€ä¸ªä¸­å¿ƒæ¢çº½ï¼Œç§°ä¸º "Cosmos Hub"ï¼Œè¿›è¡Œäº’æ“ä½œã€‚Cosmos çš„ç›®æ ‡æ˜¯åˆ›å»ºä¸€ä¸ªèƒ½å¤Ÿæ‰©å±•å’Œäº’æ“ä½œçš„åŒºå—é“¾ç”Ÿæ€ç³»ç»Ÿï¼Œä½¿å¾—ä¸åŒåŒºå—é“¾å¯ä»¥æ— ç¼åœ°ç›¸äº’é€šä¿¡ã€‚

## 2.å…³é”®ç»„ä»¶

**2.1.Tendermint**

Tendermint æ˜¯ä¸€ç§æ‹œå åº­å®¹é”™ (BFT) å…±è¯†ç®—æ³•ï¼Œå®ƒä¸º Cosmos æä¾›äº†åŸºç¡€å±‚ã€‚Tendermint æ ¸å¿ƒå…è®¸å¼€å‘äººå‘˜å¿«é€Ÿæ„å»ºé«˜æ•ˆã€å®‰å…¨å’Œå¯æ‰©å±•çš„åŒºå—é“¾åº”ç”¨ã€‚å®ƒåŒ…å«ä¸¤ä¸ªä¸»è¦éƒ¨åˆ†ï¼š

- Tendermint æ ¸å¿ƒï¼šå¤„ç†ç½‘ç»œå’Œå…±è¯†éƒ¨åˆ†ï¼Œä½¿åŒºå—é“¾èƒ½å¤Ÿåœ¨ä¸ä¿¡ä»»çš„ç¯å¢ƒä¸­è¾¾åˆ°å…±è¯†ã€‚
- Application Blockchain Interface (ABCI)ï¼šå…è®¸å¼€å‘äººå‘˜ç”¨ä»»æ„ç¼–ç¨‹è¯­è¨€æ„å»ºåº”ç”¨ç¨‹åºé€»è¾‘ã€‚

**2.2.Cosmos SDK**

Cosmos SDK æ˜¯ä¸€ä¸ªå¼€å‘æ¡†æ¶ï¼Œå®ƒå¸®åŠ©å¼€å‘è€…åˆ›å»ºè‡ªå®šä¹‰åŒºå—é“¾åº”ç”¨ã€‚SDK æä¾›äº†ä¸€ç»„é¢„å®šä¹‰çš„æ¨¡å—ï¼ˆä¾‹å¦‚è´¦æˆ·ã€æ²»ç†ã€staking ç­‰ï¼‰ï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨è¿™äº›æ¨¡å—æ„å»ºä»–ä»¬çš„åŒºå—é“¾ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºæ–°çš„æ¨¡å—æ¥æ»¡è¶³ç‰¹å®šéœ€æ±‚ã€‚

## **3.Inter-Blockchain Communication (IBC) Protocol**

IBC åè®®æ˜¯ Cosmos å®ç°ä¸åŒåŒºå—é“¾ä¹‹é—´é€šä¿¡çš„å…³é”®ã€‚IBC å…è®¸ç‹¬ç«‹çš„åŒºå—é“¾é€šè¿‡å…±äº«çš„ä¸­å¿ƒæ¢çº½è¿›è¡Œé€šä¿¡å’Œèµ„äº§äº¤æ¢ã€‚è¯¥åè®®ç¡®ä¿äº†è·¨é“¾æ“ä½œçš„å®‰å…¨æ€§å’Œå¯é æ€§ã€‚

## **4.Cosmos çš„äº’é“¾å®‰å…¨ï¼ˆInterchain Securityï¼‰**

Cosmos çš„äº’é“¾å®‰å…¨ï¼ˆInterchain Securityï¼‰æ˜¯ä¸€ç§å¢å¼ºåŒºå—é“¾ç½‘ç»œæ•´ä½“å®‰å…¨æ€§çš„æœºåˆ¶ï¼Œå®ƒå…è®¸å¤šä¸ªåŒºå—é“¾å…±äº«ä¸€ä¸ªå…±åŒçš„å®‰å…¨å±‚ã€‚å…·ä½“æ¥è¯´ï¼Œäº’é“¾å®‰å…¨ä½¿è¾ƒå°çš„åŒºå—é“¾ï¼ˆzonesï¼‰èƒ½å¤Ÿåˆ©ç”¨è¾ƒå¤§ã€è¾ƒå®‰å…¨çš„åŒºå—é“¾ï¼ˆå¦‚ Cosmos Hubï¼‰çš„éªŒè¯è€…é›†ç¾¤æ¥ä¿æŠ¤è‡ªå·±ã€‚è¿™ç§æœºåˆ¶æå‡äº†æ•´ä¸ª Cosmos ç”Ÿæ€ç³»ç»Ÿçš„å®‰å…¨æ€§å’Œç¨³å®šæ€§ã€‚

## 5. Cosmos Hub

Cosmos Hub æ˜¯ Cosmos ç½‘ç»œçš„ä¸­å¿ƒåŒºå—é“¾ï¼Œå®ƒå……å½“ä¸åŒåŒºå—é“¾ä¹‹é—´çš„ä¸­ä»‹ï¼Œç®¡ç†è·¨é“¾é€šä¿¡å’Œèµ„äº§äº¤æ¢ã€‚ATOM æ˜¯ Cosmos Hub çš„åŸç”ŸåŠ å¯†è´§å¸ï¼Œç”¨äºæ”¯ä»˜äº¤æ˜“è´¹ç”¨å’Œå‚ä¸æ²»ç†ã€‚

## 6. ç‰¹ç‚¹å’Œä¼˜åŠ¿

- å¯æ‰©å±•æ€§ï¼šCosmos é€šè¿‡åˆ†åŒºæ¶æ„å®ç°äº†é«˜å¯æ‰©å±•æ€§ï¼Œæ¯ä¸ªåŒºå—é“¾ï¼ˆzoneï¼‰å¯ä»¥ç‹¬ç«‹å¤„ç†äº¤æ˜“ï¼Œé¿å…äº†ä¼ ç»ŸåŒºå—é“¾çš„æ€§èƒ½ç“¶é¢ˆé—®é¢˜ã€‚
- å¯äº’æ“ä½œæ€§ï¼šé€šè¿‡ IBC åè®®ï¼ŒCosmos å®ç°äº†ä¸åŒåŒºå—é“¾ä¹‹é—´çš„æ— ç¼äº’æ“ä½œï¼Œä½¿å¾—èµ„äº§å’Œæ•°æ®èƒ½å¤Ÿè·¨é“¾æµåŠ¨ã€‚
- æ¨¡å—åŒ–ï¼š Cosmos SDK æä¾›äº†æ¨¡å—åŒ–çš„å¼€å‘æ¡†æ¶ï¼Œå¼€å‘è€…å¯ä»¥çµæ´»åœ°ç»„åˆé¢„å®šä¹‰æ¨¡å—æˆ–åˆ›å»ºæ–°æ¨¡å—ï¼Œå¿«é€Ÿæ„å»ºåŒºå—é“¾åº”ç”¨ã€‚
- å®‰å…¨æ€§ï¼šTendermint æ ¸å¿ƒæä¾›äº†å¼ºå¤§çš„å®‰å…¨ä¿éšœï¼Œæ”¯æŒæ‹œå åº­å®¹é”™å…±è¯†ï¼Œç¡®ä¿åœ¨éƒ¨åˆ†èŠ‚ç‚¹æ¶æ„æˆ–æ•…éšœçš„æƒ…å†µä¸‹ï¼ŒåŒºå—é“¾ä»èƒ½æ­£å¸¸è¿ä½œã€‚

## 7. å®é™…åº”ç”¨

Cosmos çš„æŠ€æœ¯å·²ç»è¢«å¤šä¸ªåŒºå—é“¾é¡¹ç›®é‡‡ç”¨ï¼Œç”¨äºæ„å»ºå»ä¸­å¿ƒåŒ–é‡‘è (DeFi)ã€ä¾›åº”é“¾ç®¡ç†ã€ç¤¾äº¤ç½‘ç»œç­‰å¤šç§åº”ç”¨åœºæ™¯ã€‚é€šè¿‡ Cosmosï¼Œå¼€å‘è€…å¯ä»¥å®ç°é«˜åº¦å¯æ‰©å±•å’Œäº’æ“ä½œçš„åŒºå—é“¾è§£å†³æ–¹æ¡ˆï¼Œæ¨åŠ¨åŒºå—é“¾æŠ€æœ¯åœ¨å„è¡Œä¸šçš„åº”ç”¨ã€‚

## 8. æœªæ¥å‘å±•

Cosmos çš„å‘å±•è·¯çº¿å›¾åŒ…æ‹¬è¿›ä¸€æ­¥ä¼˜åŒ– IBC åè®®ã€æå‡ Cosmos SDK çš„åŠŸèƒ½ã€ä»¥åŠæ‰©å±•ç”Ÿæ€ç³»ç»Ÿä¸­çš„åŒºå—é“¾æ•°é‡ã€‚æœªæ¥ï¼ŒCosmos æœ‰æœ›æˆä¸ºåŒºå—é“¾äº’æ“ä½œæ€§çš„æ ‡å‡†è§£å†³æ–¹æ¡ˆï¼Œæ¨åŠ¨åŒºå—é“¾æŠ€æœ¯çš„å¹¿æ³›åº”ç”¨å’Œå‘å±•ã€‚

æ€»ç»“æ¥è¯´ï¼ŒCosmos é€šè¿‡å…¶ç‹¬ç‰¹çš„æ¶æ„å’Œåè®®ï¼Œä¸ºåŒºå—é“¾æŠ€æœ¯çš„å¯æ‰©å±•æ€§å’Œäº’æ“ä½œæ€§é—®é¢˜æä¾›äº†æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆï¼Œä¿ƒè¿›äº†ä¸€ä¸ªå»ä¸­å¿ƒåŒ–ã€äº’è”äº’é€šçš„åŒºå—é“¾ç”Ÿæ€ç³»ç»Ÿçš„å½¢æˆã€‚

# äºŒ.ç¦»çº¿åœ°å€ç”Ÿæˆ

## NodeJs ä»£ç 

```javascript
export async function createAtomAddress (seedHex: string, addressIndex: number, network: string) {
  const node = bip32.fromSeed(Buffer.from(seedHex, 'hex'));
  const child = node.derivePath("m/44'/118'/0'/0/" + addressIndex + '');
  const publicKey = child.publicKey.toString('hex');
  const prefix = 'cosmos';
  const pubkey = {
    type: 'tendermint/PubKeySecp256k1',
    value: toBase64(
      fromHex(
        publicKey
      )
    )
  };
  const address = atomPubkeyToAddress(pubkey, prefix);
  return {
    privateKey: Buffer.from(child.privateKey).toString('hex'),
    publicKey: Buffer.from(child.publicKey).toString('hex'),
    address
  };
}
```

## Python ä»£ç 

```python
def generate_wallet():
    privkey = PrivateKey().serialize()
    return {
        "private_key": privkey,
        "public_key": privkey_to_pubkey(privkey),
        "address": privkey_to_address(privkey),
    }

def privkey_to_pubkey(privkey: str) -> str:
    privkey_obj = PrivateKey(bytes.fromhex(privkey))
    return privkey_obj.pubkey.serialize().hex()

def pubkey_to_address(pubkey: str) -> str:
    pubkey_bytes = bytes.fromhex(pubkey)
    s = hashlib.new("sha256", pubkey_bytes).digest()
    r = hashlib.new("ripemd160", s).digest()
    return bech32.bech32_encode("cosmos", bech32.convertbits(r, 8, 5))

def privkey_to_address(privkey: str) -> str:
    pubkey = privkey_to_pubkey(privkey)
    return pubkey_to_address(pubkey)

wallet = generate_wallet()
print(wallet)
```

## ä¸‰.ç¦»çº¿ç­¾å

## NodeJs V1 ä»£ç 

```javascript
export async function signAtomTransaction (params: any): Promise<string> {
  const { privateKey, chainId, from, to, memo, amount, fee, gas, accountNumber, sequence, decimal } = params;
  const calcAmount = new BigNumber(amount).times(new BigNumber(10).pow(decimal)).toNumber();
  if (calcAmount % 1 !== 0) throw new Error('amount invalid');
  const calcFee = new BigNumber(fee).times(new BigNumber(10).pow(decimal)).toNumber();
  if (calcFee % 1 !== 0) throw new Error('fee invalid');
  const signDoc = {
    msgs: [
      {
        type: 'cosmos-sdk/MsgSend',
        value: {
          from_address: from,
          to_address: to,
          amount: [{ amount: BigNumber(amount).times(Math.pow(10, decimal)).toString(), denom: 'uatom' }]
        }
      }
    ],
    fee: {
      amount: [{ amount: BigNumber(fee).times(Math.pow(10, decimal)).toString(), denom: 'uatom' }],
      gas: String(gas)
    },
    chain_id: chainId,
    memo: memo || '',
    account_number: accountNumber.toString(),
    sequence: sequence.toString()
  };
  const signer = await Secp256k1Wallet.fromKey(new Uint8Array(Buffer.from(privateKey, 'hex')), 'cosmos');
  const { signature } = await signer.signAmino(from, signDoc);
  const tx = {
    tx: {
      msg: signDoc.msgs,
      fee: signDoc.fee,
      signatures: [signature],
      memo: memo || ''
    },
    mode: 'sync'
  };
  return JSON.stringify(tx);
}
```

## NodeJs V2 ä»£ç 

```javascript
export async function SignV2Transaction(params: any): Promise<string> {
  const {  chainId, from, to, memo, amount_in, fee, gas, accountNumber, sequence, decimal, privateKey } = params;
  
  const amount = BigNumber(amount_in).times(Math.pow(10, decimal)).toString();
  const feeAmount = BigNumber(fee).times(Math.pow(10, decimal)).toString();
  const unit = "uatom";
  if (amount.toString().indexOf(".") !== -1) {
    throw new Error('input amount value invalid.');
  }
  if (feeAmount.toString().indexOf(".") !== -1) {
    throw new Error('input amount value invalid.');
  }
  if (!verifyAddress({ address: from }) || !verifyAddress({ address: to })) {
    throw new Error('input address value invalid.');
  }
  const sendMessage = createSendMessage(
      from,
      to,
      amount,
      unit
  );
  const messages = [sendMessage];
  const txBody = createTxBody(messages, memo);
  const { pubkey } = await Secp256k1Wallet.fromKey(
      fromHex(privateKey),
      "cosmos"
  );
  const authInfo = await getAuthInfo(
      pubkey,
      sequence.toString(),
      feeAmount,
      unit,
      gas
  );
  const signDoc = getSignDoc(chainId, txBody, authInfo, accountNumber);
  const signature = getDirectSignature(signDoc, fromHex(privateKey));
  const txRawBytes = createTxRawBytes(
      txBody,
      authInfo,
      signature
  );
  const txBytesBase64 = Buffer.from(txRawBytes, 'binary').toString('base64');
  const txRaw = { tx_bytes: txBytesBase64, mode: "BROADCAST_MODE_SYNC" };
  return JSON.stringify(txRaw);
}
```

## Python ä»£ç 

```python
import base64
import json
from secp256k1 import PrivateKey
from address import privkey_to_address, privkey_to_pubkey

class Transaction:
    def __init__(self, *, privkey: str, account_num:int, sequence:int, fee:int, gas:int, memo:str = "", chain_id: str = "cosmoshub-2",sync_mode = "sync"):
        self.privkey = privkey
        self.account_num = account_num
        self.sequence = sequence
        self.fee = fee
        self.gas = gas
        self.memo = memo
        self.chain_id = chain_id
        self.sync_mode = sync_mode
        self.msgs = []
    def add_atom_transfer(self, recipient: str, amount: int) -> None:
        self.msgs.append(
            {
                "type": "cosmos-sdk/MsgSend",
                "value": {
                    "from_address": privkey_to_address(self.privkey),
                    "to_address": recipient,
                    "amount": [{"denom": "uatom", "amount": str(amount)}],
                },
            }
        )


    def _get_sign_message(self):
        return {
            "chain_id": self.chain_id,
            "account_number": str(self.account_num),
            "fee": {"gas": str(self.gas), "amount": [{"amount": str(self.fee), "denom": "uatom"}]},
            "memo": self.memo,
            "sequence": str(self.sequence),
            "msgs": self.msgs,
        }

    def _sign(self) -> str:
        message_str = json.dumps(self._get_sign_message(), separators=(",", ":"), sort_keys=True)
        message_bytes = message_str.encode("utf-8")
        privkey = PrivateKey(bytes.fromhex(self.privkey))
        signature = privkey.ecdsa_sign(message_bytes)
        signature_compact = privkey.ecdsa_serialize_compact(signature)
        signature_base64_str = base64.b64encode(signature_compact).decode("utf-8")
        return signature_base64_str

    def get_pushable_tx(self) -> str:
        pubkey = privkey_to_pubkey(self.privkey)
        base64_pubkey = base64.b64encode(bytes.fromhex(pubkey)).decode("utf-8")
        pushable_tx = {
            "tx": {
                "msg": self.msgs,
                "fee": {
                    "gas": str(self.gas),
                    "amount": [{"denom": "uatom", "amount": str(self.fee)}],
                },
                "memo": self.memo,
                "signatures": [
                    {
                        "signature": self._sign(),
                        "pub_key": {"type": "tendermint/PubKeySecp256k1", "value": base64_pubkey},
                        "account_number": str(self.account_num),
                        "sequence": str(self.sequence),
                    }
                ],
            },
            "mode": self.sync_mode,
        }
        return json.dumps(pushable_tx, separators=(",", ":"))


tx = Transaction(
    privkey="priKey",
    account_num=11335,
    sequence=0,
    fee=1000,
    gas=37000,
    memo="",
    chain_id="cosmoshub-2",
    sync_mode="sync",
)

tx.add_atom_transfer(recipient="cosmos103l758ps7403sd9c0y8j6hrfw4xyl70j4mmwkf", amount=387000)
pushable_tx = tx.get_pushable_tx()
print(pushable_tx)
```

# å››. Cosmos é’±åŒ…å¼€å‘ä¸­ç”¨åˆ°çš„ API

## 1.è·å–è´¦æˆ·ä¿¡æ¯

- è¯·æ±‚ç¤ºèŒƒ
- å‚æ•°ï¼šæ— 

```bash
curl --location 'https://cosmos-rest.publicnode.com/cosmos/auth/v1beta1/account_info/cosmos1z79jxnsw64c20upyfu8rfe89pdsel48kfmzjgu'
```

- è¿”å›å€¼

```json
{
    "info": {
        "address": "cosmos1z79jxnsw64c20upyfu8rfe89pdsel48kfmzjgu",
        "pub_key": {
            "@type": "/cosmos.crypto.secp256k1.PubKey",
            "key": "A26PAcbmjZxcZqsXL/CJgjTHqImZeAJDe85ufR+JFh/B"
        },
        "account_number": "2782398",
        "sequence": "1"
    }
}
```

## 2. è·å–æœ€æ–°å—é«˜

- è¯·æ±‚ç¤ºèŒƒ
- å‚æ•°ï¼šæ— 

```bash
curl --location 'https://cosmos-rest.publicnode.com/cosmos/base/tendermint/v1beta1/blocks/latest' \
--data ''
```

- è¿”å›å€¼

```json
{
  "block_id": {
    "hash": "Cr9rJ/PdYLz/QJQcS6Q/AJghKbWF6dvWD7LNO8ukpU0=",
    "part_set_header": {
      "total": 1,
      "hash": "pxCRahdweihOWcvXUId/8quOkq1iQd9FN5yYOkebCHM="
    }
  },
  "block": {
    "header": {
      "version": {
        "block": "11",
        "app": "0"
      },
      "chain_id": "cosmoshub-4",
      "height": "20623348",
      "time": "2024-05-28T12:39:29.860619997Z",
      "last_block_id": {
        "hash": "gbn8ySZ9MLY4Jl/TimgWKts3hiFXmF94ASFDIcT/ybw=",
        "part_set_header": {
          "total": 1,
          "hash": "uOn9tB+l+dyJuCLTzq0+5RvEFlGBBCXPfXm3yGSHGQk="
        }
      },
      "last_commit_hash": "PiCAPoXY18mOrOsi+/ngCDWF2fyTYVYz54kV74fJl+s=",
      "data_hash": "PS+gr4pphuFkMVK8C6NzjbuYHqG3Eop4M4B4pvxAkqw=",
      "validators_hash": "mF8rzuSavUuga45BXZMqCOG1sqNX2cZJf/ViVgjxxCg=",
      "next_validators_hash": "zchpzRRe3grdEiTOOS+/aO8WxjngeZNlGhE+cxkQ2ZQ=",
      "consensus_hash": "DHGkgcYVHl/p32F/XoN09hpJ6geIV5TuqUCt/SmT2f4=",
      "app_hash": "WdTmJA2XP/nEOjKSKp9zzdHnk6oqIYfp0f6Rz7v0fzM=",
      "last_results_hash": "4upz/IMEvhS3V0IIQLEbyfQhOtjf9klwr3mObDCBivA=",
      "evidence_hash": "47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=",
      "proposer_address": "0tRY+SCey4yiqrHZngZhG4Eqh5c="
    },
    "data": {
      "txs": [
        "CqMBCqABCjcvY29zbW9zLmRpc3RyaWJ1dGlvbi52MWJldGExLk1zZ1dpdGhkcmF3RGVsZWdhdG9yUmV3YXJkEmUKLWNvc21vczFlbHVoY2czZ2c2OXlyZ2ZneHpobXo5YzNnN3E2OGVyZ2p1YXV5cRI0Y29zbW9zdmFsb3BlcjEzMG1kdTlhMGV0bWV1dzUycWZ4azczcG4wZ2E2Z2F3a3hzcmx3ZhJoClAKRgofL2Nvc21vcy5jcnlwdG8uc2VjcDI1NmsxLlB1YktleRIjCiECMuj1gq1yySK0t9md1ewoiHrDF51xQxVfumbIKHHBR/4SBAoCCH8YDxIUCg4KBXVhdG9tEgUxOTk0MBCB1zAaQBIEhgcjMywzIoDOSOSTpsPCh3usuDtINrWTA9QrL5qOYk/smgi8UvxXTFdB9pzwHSIEyG+xtb9v0R1NekPPUvM=",
        "CrsBCooBChwvY29zbW9zLmJhbmsudjFiZXRhMS5Nc2dTZW5kEmoKLWNvc21vczE4Y2p3ZWN4Y2c1Mmp6OTVkaHBkZzl1Y3JxM2NjeGYybHV1NjVnNRItY29zbW9zMW1ydHRhOXpjMGRzaDMwdmZkcXZmYW04a3djZ3g2cmdrYW0yam51GgoKBXVhdG9tEgExEixwcnl6bTE4Y2p3ZWN4Y2c1Mmp6OTVkaHBkZzl1Y3JxM2NjeGYybHl2ZG5rOBJnClAKRgofL2Nvc21vcy5jcnlwdG8uc2VjcDI1NmsxLlB1YktleRIjCiECjHhA4pLCWWUbidhR9yMjsBSUnSRHSrCcmuDFcj3ZMp0SBAoCCH8YAxITCg0KBXVhdG9tEgQxNjkyENqQBBpAMRNaVaMWbdUgfpiRkC9LTB93FMWztlsIaTEk82zIMzZdRch9SqKbiEH433Ar9xyPQUrsM40OUWR+rNTRlXggqw=="
      ]
    },
    "evidence": {
      "evidence": []
    },
    "last_commit": {}
  },
  "sdk_block": {}
}
```

## 3. æ ¹æ®å—å·è·å–äº¤æ˜“

- è¯·æ±‚ç¤ºèŒƒ
- å‚æ•°ï¼šåŒºå—å·

```bash
curl --location 'https://cosmos-rest.publicnode.com/cosmos/base/tendermint/v1beta1/blocks/20623348' \
--data ''
```

- è¿”å›å€¼

```json
{
  "block_id": {
    "hash": "Cr9rJ/PdYLz/QJQcS6Q/AJghKbWF6dvWD7LNO8ukpU0=",
    "part_set_header": {
      "total": 1,
      "hash": "pxCRahdweihOWcvXUId/8quOkq1iQd9FN5yYOkebCHM="
    }
  },
  "block": {
    "header": {
      "version": {
        "block": "11",
        "app": "0"
      },
      "chain_id": "cosmoshub-4",
      "height": "20623348",
      "time": "2024-05-28T12:39:29.860619997Z",
      "last_block_id": {
        "hash": "gbn8ySZ9MLY4Jl/TimgWKts3hiFXmF94ASFDIcT/ybw=",
        "part_set_header": {
          "total": 1,
          "hash": "uOn9tB+l+dyJuCLTzq0+5RvEFlGBBCXPfXm3yGSHGQk="
        }
      },
      "last_commit_hash": "PiCAPoXY18mOrOsi+/ngCDWF2fyTYVYz54kV74fJl+s=",
      "data_hash": "PS+gr4pphuFkMVK8C6NzjbuYHqG3Eop4M4B4pvxAkqw=",
      "validators_hash": "mF8rzuSavUuga45BXZMqCOG1sqNX2cZJf/ViVgjxxCg=",
      "next_validators_hash": "zchpzRRe3grdEiTOOS+/aO8WxjngeZNlGhE+cxkQ2ZQ=",
      "consensus_hash": "DHGkgcYVHl/p32F/XoN09hpJ6geIV5TuqUCt/SmT2f4=",
      "app_hash": "WdTmJA2XP/nEOjKSKp9zzdHnk6oqIYfp0f6Rz7v0fzM=",
      "last_results_hash": "4upz/IMEvhS3V0IIQLEbyfQhOtjf9klwr3mObDCBivA=",
      "evidence_hash": "47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=",
      "proposer_address": "0tRY+SCey4yiqrHZngZhG4Eqh5c="
    },
    "data": {
      "txs": [
        "CqMBCqABCjcvY29zbW9zLmRpc3RyaWJ1dGlvbi52MWJldGExLk1zZ1dpdGhkcmF3RGVsZWdhdG9yUmV3YXJkEmUKLWNvc21vczFlbHVoY2czZ2c2OXlyZ2ZneHpobXo5YzNnN3E2OGVyZ2p1YXV5cRI0Y29zbW9zdmFsb3BlcjEzMG1kdTlhMGV0bWV1dzUycWZ4azczcG4wZ2E2Z2F3a3hzcmx3ZhJoClAKRgofL2Nvc21vcy5jcnlwdG8uc2VjcDI1NmsxLlB1YktleRIjCiECMuj1gq1yySK0t9md1ewoiHrDF51xQxVfumbIKHHBR/4SBAoCCH8YDxIUCg4KBXVhdG9tEgUxOTk0MBCB1zAaQBIEhgcjMywzIoDOSOSTpsPCh3usuDtINrWTA9QrL5qOYk/smgi8UvxXTFdB9pzwHSIEyG+xtb9v0R1NekPPUvM=",
        "CrsBCooBChwvY29zbW9zLmJhbmsudjFiZXRhMS5Nc2dTZW5kEmoKLWNvc21vczE4Y2p3ZWN4Y2c1Mmp6OTVkaHBkZzl1Y3JxM2NjeGYybHV1NjVnNRItY29zbW9zMW1ydHRhOXpjMGRzaDMwdmZkcXZmYW04a3djZ3g2cmdrYW0yam51GgoKBXVhdG9tEgExEixwcnl6bTE4Y2p3ZWN4Y2c1Mmp6OTVkaHBkZzl1Y3JxM2NjeGYybHl2ZG5rOBJnClAKRgofL2Nvc21vcy5jcnlwdG8uc2VjcDI1NmsxLlB1YktleRIjCiECjHhA4pLCWWUbidhR9yMjsBSUnSRHSrCcmuDFcj3ZMp0SBAoCCH8YAxITCg0KBXVhdG9tEgQxNjkyENqQBBpAMRNaVaMWbdUgfpiRkC9LTB93FMWztlsIaTEk82zIMzZdRch9SqKbiEH433Ar9xyPQUrsM40OUWR+rNTRlXggqw=="
      ]
    },
    "evidence": {
      "evidence": []
    },
    "last_commit": {}
  },
  "sdk_block": {

    },
    "last_commit": {}
  }
}
```

## 4. äº¤æ˜“è§£ç 

- è¯·æ±‚ç¤ºèŒƒ
- å‚æ•°ï¼šç¼–ç çš„äº¤æ˜“

```bash
curl --location 'https://cosmos-rest.publicnode.com/cosmos/tx/v1beta1/decode' \
--header 'Content-Type: application/json' \
--data '{
    "tx_bytes": "CrsBCooBChwvY29zbW9zLmJhbmsudjFiZXRhMS5Nc2dTZW5kEmoKLWNvc21vczE4Y2p3ZWN4Y2c1Mmp6OTVkaHBkZzl1Y3JxM2NjeGYybHV1NjVnNRItY29zbW9zMW1ydHRhOXpjMGRzaDMwdmZkcXZmYW04a3djZ3g2cmdrYW0yam51GgoKBXVhdG9tEgExEixwcnl6bTE4Y2p3ZWN4Y2c1Mmp6OTVkaHBkZzl1Y3JxM2NjeGYybHl2ZG5rOBJnClAKRgofL2Nvc21vcy5jcnlwdG8uc2VjcDI1NmsxLlB1YktleRIjCiECjHhA4pLCWWUbidhR9yMjsBSUnSRHSrCcmuDFcj3ZMp0SBAoCCH8YAxITCg0KBXVhdG9tEgQxNjkyENqQBBpAMRNaVaMWbdUgfpiRkC9LTB93FMWztlsIaTEk82zIMzZdRch9SqKbiEH433Ar9xyPQUrsM40OUWR+rNTRlXggqw=="
}'
```

- è¿”å›å€¼

```json
{
    "tx": {
        "body": {
            "messages": [
                {
                    "@type": "/cosmos.bank.v1beta1.MsgSend",
                    "from_address": "cosmos18cjwecxcg52jz95dhpdg9ucrq3ccxf2luu65g5",
                    "to_address": "cosmos1mrtta9zc0dsh30vfdqvfam8kwcgx6rgkam2jnu",
                    "amount": [
                        {
                            "denom": "uatom",
                            "amount": "1"
                        }
                    ]
                }
            ],
            "memo": "pryzm18cjwecxcg52jz95dhpdg9ucrq3ccxf2lyvdnk8",
            "timeout_height": "0",
            "extension_options": [],
            "non_critical_extension_options": []
        },
        "auth_info": {
            "signer_infos": [
                {
                    "public_key": {
                        "@type": "/cosmos.crypto.secp256k1.PubKey",
                        "key": "Aox4QOKSwlllG4nYUfcjI7AUlJ0kR0qwnJrgxXI92TKd"
                    },
                    "mode_info": {
                        "single": {
                            "mode": "SIGN_MODE_LEGACY_AMINO_JSON"
                        }
                    },
                    "sequence": "3"
                }
            ],
            "fee": {
                "amount": [
                    {
                        "denom": "uatom",
                        "amount": "1692"
                    }
                ],
                "gas_limit": "67674",
                "payer": "",
                "granter": ""
            },
            "tip": null
        },
        "signatures": [
            "MRNaVaMWbdUgfpiRkC9LTB93FMWztlsIaTEk82zIMzZdRch9SqKbiEH433Ar9xyPQUrsM40OUWR+rNTRlXggqw=="
        ]
    }
}
```

ğŸ‘‹ è¿”å›å€¼ 

ğŸ‘‹ğŸ‘‹ from_address: è½¬å‡ºåœ°å€ 

ğŸ‘‹ğŸ‘‹ to_address: è½¬å…¥åœ°å€ 

ğŸ‘‹ğŸ‘‹ amountï¼šè½¬è´¦é‡‘é¢ 

ğŸ‘‹ğŸ‘‹ memoï¼šè½¬è´¦å¤‡æ³¨ 

ğŸ‘‹ğŸ‘‹ feeï¼šèŠ±è´¹çš„æ‰‹ç»­è´¹

## 5. æ ¹æ®äº¤æ˜“ Hash è·å–äº¤æ˜“ä¿¡æ¯

- è¯·æ±‚ç¤ºèŒƒ
- å‚æ•°ï¼šäº¤æ˜“ Hash

```bash
curl --location 'https://cosmos-rest.publicnode.com/cosmos/tx/v1beta1/txs/E798BB4EFBF9495B56733248E46C9AE3C4F7FEA2F1F959E6FC64A7C3E5DD6C56'
```

- è¿”å›å€¼

```json
{
    "tx": {
        "body": {
            "messages": [
                {
                    "@type": "/cosmos.bank.v1beta1.MsgSend",
                    "from_address": "cosmos1z79jxnsw64c20upyfu8rfe89pdsel48kfmzjgu",
                    "to_address": "cosmos1er40wr3v78awxt02k4hq6evl3qjrpd4fkdmmq3",
                    "amount": [
                        {
                            "denom": "uatom",
                            "amount": "100000"
                        }
                    ]
                }
            ],
            "memo": "1010",
            "timeout_height": "0",
            "extension_options": [],
            "non_critical_extension_options": []
        },
```

- ğŸ‘‹ è¿”å›å€¼ 
- ğŸ‘‹ğŸ‘‹ from_address: è½¬å‡ºåœ°å€ 
- ğŸ‘‹ğŸ‘‹ to_address: è½¬å…¥åœ°å€ 
- ğŸ‘‹ğŸ‘‹ amountï¼šè½¬è´¦é‡‘é¢ 
- ğŸ‘‹ğŸ‘‹ memoï¼šè½¬è´¦å¤‡æ³¨ 
- ğŸ‘‹ğŸ‘‹ feeï¼šèŠ±è´¹çš„æ‰‹ç»­è´¹

## 6. å¹¿æ’­äº¤æ˜“

- è¯·æ±‚ç¤ºèŒƒ
- å‚æ•°ï¼šç­¾åæ„å»ºçš„äº¤æ˜“

```bash
curl --location 'https://cosmos-rest.publicnode.com/cosmos/tx/v1beta1/txs' \
--header 'Content-Type: application/json' \
--data '    {"tx_bytes":"CpgBCo8BChwvY29zbW9zLmJhbmsudjFiZXRhMS5Nc2dTZW5kEm8KLWNvc21vczF6NzlqeG5zdzY0YzIwdXB5ZnU4cmZlODlwZHNlbDQ4a2ZtempndRItY29zbW9zMWVyNDB3cjN2Nzhhd3h0MDJrNGhxNmV2bDNxanJwZDRma2RtbXEzGg8KBXVhdG9tEgYxMDAwMDASBDEwMTASZwpQCkYKHy9jb3Ntb3MuY3J5cHRvLnNlY3AyNTZrMS5QdWJLZXkSIwohA26PAcbmjZxcZqsXL/CJgjTHqImZeAJDe85ufR+JFh/BEgQKAggBGAESEwoNCgV1YXRvbRIEMTAwMBDj7AUaQP2sdB0DnYNOGSbHWoRbsEexeRbHEDNnyC4rt7EkVLDUde9xRHYNhda5DOd+q+C/n9O7muLaqvHq/FYifanfz+I=","mode":"BROADCAST_MODE_SYNC"}
'
```

- è¿”å›å€¼

```json
{
    "tx_response": {
        "height": "0",
        "txhash": "61B11E204823F6D75CED30BD1421884834AD8F69983500B159140891CFBA7B94",
        "codespace": "",
        "code": 0,
        "data": "",
        "raw_log": "[]",
        "logs": [],
        "info": "",
        "gas_wanted": "0",
        "gas_used": "0",
        "tx": null,
        "timestamp": "",
        "events": []
    }
}
```

# äº”. ä¸­å¿ƒåŒ–é’±åŒ…å¼€å‘

## **1. ç¦»çº¿åœ°å€ç”Ÿæˆ**

- è°ƒåº¦ç­¾åæœºç”Ÿæˆå¯†é’¥å¯¹ï¼Œç­¾åæœºåå‡ºå…¬é’¥
- ä½¿ç”¨å…¬é’¥åŒ™å¯¼å‡ºåœ°å€

## **2.å……å€¼é€»è¾‘**

- è·å¾—æœ€æ–°å—é«˜ï¼›æ›´æ–°åˆ°æ•°æ®åº“
- ä»æ•°æ®åº“ä¸­è·å–ä¸Šæ¬¡è§£æäº¤æ˜“çš„å—é«˜åšä¸ºèµ·å§‹å—é«˜ï¼Œæœ€æ–°å—é«˜ä¸ºæˆªæ­¢å—é«˜ï¼Œå¦‚æœæ•°æ®åº“ä¸­æ²¡æœ‰è®°å½•ï¼Œè¯´æ˜éœ€è¦ä»å¤´å¼€å§‹æ‰«ï¼Œèµ·å§‹å—é«˜ä¸º 0ï¼›
- è§£æåŒºå—é‡Œé¢çš„äº¤æ˜“ï¼Œto åœ°å€æ˜¯ç³»ç»Ÿå†…éƒ¨çš„ç”¨æˆ·åœ°å€ï¼Œè¯´æ˜ç”¨æˆ·å……å€¼ï¼Œæ›´æ–°äº¤æ˜“åˆ°æ•°æ®åº“ä¸­ï¼Œå°†äº¤æ˜“çš„çŠ¶æ€è®¾ç½®ä¸ºå¾…ç¡®è®¤ã€‚
- æ‰€åœ¨å—çš„äº¤æ˜“è¿‡äº†ç¡®è®¤ä½ï¼Œå°†äº¤æ˜“çŠ¶æ€æ›´æ–°ä½å……å€¼æˆåŠŸå¹¶é€šçŸ¥ä¸šåŠ¡å±‚ã€‚
- è§£æåˆ°çš„å……å€¼äº¤æ˜“éœ€è¦åœ¨é’±åŒ…çš„æ•°æ®åº“é‡Œé¢ç»´æŠ¤ account_number å’Œ sequence, å½“ç„¶ä¹Ÿå¯ä»¥ä¸ç»´æŠ¤ï¼Œç­¾åçš„æ—¶å€™å»é“¾ä¸Šè·å–

## **3. æç°é€»è¾‘**

- è·å–ç¦»çº¿ç­¾åéœ€è¦çš„å‚æ•°ï¼Œç»™åˆé€‚çš„æ‰‹ç»­è´¹
- æ„å»ºæœªç­¾åçš„äº¤æ˜“æ¶ˆæ¯æ‘˜è¦ï¼Œå°†æ¶ˆæ¯æ‘˜è¦é€’ç»™ç­¾åæœºç­¾å
- æ„å»ºå®Œæ•´çš„äº¤æ˜“å¹¶è¿›è¡Œåºåˆ—åŒ–
- å‘é€äº¤æ˜“åˆ°åŒºå—é“¾ç½‘ç»œ
- æ‰«é“¾è·å–åˆ°äº¤æ˜“ä¹‹åæ›´æ–°äº¤æ˜“çŠ¶æ€å¹¶ä¸ŠæŠ¥ä¸šåŠ¡å±‚

## **4.å½’é›†é€»è¾‘**

- å°†ç”¨æˆ·åœ°å€ä¸Šçš„èµ„é‡‘è½¬åˆ°å½’é›†åœ°å€ï¼Œç­¾åæµç¨‹ç±»ä¼¼æç°
- å‘é€äº¤æ˜“åˆ°åŒºå—é“¾ç½‘ç»œ
- æ‰«é“¾è·å–åˆ°äº¤æ˜“ä¹‹åæ›´æ–°äº¤æ˜“çŠ¶æ€

## **5. è½¬å†·é€»è¾‘**

- å°†çƒ­é’±åŒ…åœ°å€ä¸Šçš„èµ„é‡‘è½¬åˆ°å†·é’±åŒ…åœ°å€ï¼Œç­¾åæµç¨‹ç±»ä¼¼æç°
- å‘é€äº¤æ˜“åˆ°åŒºå—é“¾ç½‘ç»œ
- æ‰«é“¾è·å–åˆ°äº¤æ˜“ä¹‹åæ›´æ–°äº¤æ˜“çŠ¶æ€

## **6.å†·è½¬çƒ­é€»è¾‘**

- æ‰‹åŠ¨æ“ä½œè½¬è´¦åˆ°çƒ­é’±åŒ…åœ°å€
- æ‰«é“¾è·å–åˆ°äº¤æ˜“ä¹‹åæ›´æ–°äº¤æ˜“çŠ¶æ€

**æ³¨æ„ï¼šäº¤è´¹çš„å­¦å‘˜éœ€è¦å®Œæ•´çš„é¡¹ç›®å®æˆ˜ä»£ç å¯å¯»æ±‚ The Web3 ç¤¾åŒºç´¢å–**

# å…­ HD é’±åŒ…å¼€å‘

## **1.ç¦»çº¿åœ°ç”Ÿæˆå’Œç¦»çº¿ç­¾å**

å‚è€ƒä¸Šé¢çš„ä»£ç 

## **2.å’Œé“¾ä¸Šäº¤äº’çš„æ¥å£**

- è·å–è´¦æˆ·ä½™é¢
- æ ¹æ®åœ°å€è·å–äº¤æ˜“è®°å½•
- è·å–é¢„ä¼°æ‰‹ç»­è´¹

å¯¹åº”ä»£ç åº“ï¼šhttps://github.com/the-web3/wallet-chain-node

# ä¸ƒ. **æ€»ç»“**

HD é’±åŒ…å’Œäº¤æ˜“æ‰€é’±åŒ…ä¸åŒä¹‹å¤„æœ‰ä»¥ä¸‹å‡ ç‚¹

## **1.å¯†é’¥ç®¡ç†æ–¹å¼ä¸åŒ**

- HD é’±åŒ…ç§é’¥åœ¨æœ¬åœ°è®¾å¤‡ï¼Œç§é’¥ç”¨æˆ·è‡ªå·±æ§åˆ¶
- äº¤æ˜“æ‰€é’±åŒ…ä¸­å¿ƒåŒ–æœåŠ¡å™¨(CloadHSM, TEE ç­‰)ï¼Œç§é’¥é¡¹ç›®æ–¹æ§åˆ¶

## **2.èµ„é‡‘å­˜åœ¨æ–¹å¼ä¸åŒ**

- HD èµ„é‡‘åœ¨ç”¨æˆ·é’±åŒ…åœ°å€
- äº¤æ˜“æ‰€é’±åŒ…èµ„é‡‘åœ¨äº¤æ˜“æ‰€çƒ­é’±åŒ…æˆ–è€…å†·é’±åŒ…é‡Œé¢, ç”¨æˆ·æç°çš„æ—¶å€™ä»äº¤æ˜“æ‰€çƒ­é’±åŒ…æå–

## **3.ä¸šåŠ¡é€»è¾‘ä¸ä¸€è‡´**

- ä¸­å¿ƒåŒ–é’±åŒ…ï¼šå®æ—¶ä¸æ–­æ‰«é“¾æ›´æ–°äº¤æ˜“æ•°æ®å’ŒçŠ¶æ€
- HD é’±åŒ…ï¼šæ ¹æ®ç”¨æˆ·çš„æ“ä½œé€šè¿‡è¯·æ±‚æ¥å£å®ç°ä¸šåŠ¡é€»è¾‘

# å…«.é™„å½•

- åŒºå—é“¾æµè§ˆå™¨ï¼šhttps://cosmos.bigdipper.live/
- å®˜ç½‘ï¼šhttps://cosmos.network/
- github:https://github.com/cosmos/
- ç”µæŠ¥ç¾¤ï¼šhttps://t.me/cosmosproject
- redditï¼šhttps://reddit.com/r/cosmosnetwork
- twitterï¼šhttps://twitter.com/cosmos
- slideshareï¼šhttps://www.slideshare.net/tendermint
- API æ–‡æ¡£ï¼šhttps://docs.cosmos.network/api#tag/Query/operation/AllBalances
- Tendermint API æ–‡æ¡£ï¼šhttps://docs.cometbft.com/main/rpc/#/Info/status
